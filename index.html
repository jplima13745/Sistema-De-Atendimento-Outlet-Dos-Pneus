<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale-1.0">
    <title>Atendimentos Outlet - Gest√£o de Servi√ßos</title>
    <!-- Carregando Tailwind CSS para estiliza√ß√£o moderna e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carregando Font Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    
    <!-- Vinculando o arquivo CSS externo -->
    <link rel="stylesheet" href="assets/css/style.css">
    
</head>
<body>

    <div class="app-container">
        
        <!-- ======================================================= -->
        <!-- TELA DE LOGIN -->
        <!-- ======================================================= -->
        <!-- CORRE√á√ÉO DE INICIALIZA√á√ÉO: Tela de login e conte√∫do principal ficam escondidos at√© o JS decidir qual mostrar -->
        <div id="login-container" class="hidden absolute inset-0 bg-gray-50 flex items-center justify-center p-8 z-50">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-8 border border-gray-200">
                <h2 class="text-3xl font-bold text-blue-900 mb-6 text-center">Acesso <span class="text-yellow-400">Atendimentos Outlet</span></h2>
                <p class="text-sm text-gray-500 mb-6 text-center">Use suas credenciais para acessar o sistema.</p>
                
                <form id="login-form">
                    <div class="mb-4">
                        <label for="username" class="block text-sm font-medium text-gray-700">Usu√°rio</label>
                        <input type="text" id="username" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="mb-6">
                        <label for="password" class="block text-sm font-medium text-gray-700">Senha</label>
                        <input type="password" id="password" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <p id="login-error" class="text-red-500 text-sm mb-4 text-center"></p>
                    <button type="submit" class="w-full py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out">
                        Entrar
                    </button>
                </form>

                <div class="mt-6 text-sm text-gray-500 text-center border-t pt-4">
                    <p>Credenciais de Teste:</p>
                    <ul class="mt-2 space-y-1">
                        <li><b>Gerente (Acesso Total):</b> gerente.outlet / gerenteitapoa</li>
                        <li><b>Alinhador (Acesso Restrito):</b> alinhador / alinhador123</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ======================================================= -->
        <!-- CONTE√öDO PRINCIPAL (Exibido apenas ap√≥s Login) -->
        <!-- ======================================================= -->
        <div id="main-content" class="hidden flex-grow flex flex-col">
            <!-- Cabe√ßalho e Navega√ß√£o -->
            <header class="p-6 bg-blue-900 text-white rounded-t-xl flex justify-between items-center">
                <h1 class="text-3xl font-bold">Atendimentos <span class="text-yellow-400">Outlet</span></h1>
                <div class="flex items-center space-x-4">
                    <p id="user-info" class="text-sm mt-1 text-gray-400"></p>
                    <button onclick="handleLogout()" class="text-sm font-medium py-1 px-3 bg-red-600 hover:bg-red-700 rounded-lg transition duration-150">Sair</button>
                </div>
            </header>

            <!-- Bot√µes de Navega√ß√£o (Tabs) -->
            <nav id="main-nav" class="flex border-b border-gray-200 bg-gray-100">
                <!-- NOVO: Adicionado ID e classe para controle do Alinhador -->
                <button id="tab-servicos" class="tab-button p-4 text-sm font-medium text-gray-600 hover:bg-gray-200 active" data-tab="servicos">
                    Servi√ßos e Atribui√ß√£o
                </button>
                <button id="tab-alinhamento" class="tab-button p-4 text-sm font-medium text-gray-600 hover:bg-gray-200" data-tab="alinhamento">
                    Fila de Alinhamento (Vendedor/Alinhador)
                </button>
                <!-- NOVO: Adicionado ID e classe para controle do Alinhador -->
                <button id="tab-monitor" class="tab-button p-4 text-sm font-medium text-gray-600 hover:bg-gray-200" data-tab="monitor">
                    Pagamentos e Finaliza√ß√£o (Gerente)
                </button>
                <button id="tab-removal" class="tab-button p-4 text-sm font-medium text-gray-600 hover:bg-gray-200 hidden" data-tab="removal">
                    Remo√ß√£o/Edi√ß√£o (Gerente/Vendedor)
                </button>
                <button id="tab-admin" class="tab-button p-4 text-sm font-medium text-gray-600 hover:bg-gray-200 hidden" data-tab="admin">
                    Administrativo (Usu√°rios)
                </button>
            </nav>

            <!-- Conte√∫do das Abas -->
            <main class="flex-grow overflow-auto">

                <!-- 1. Servi√ßos e Atribui√ß√£o -->
                <!-- NOVO: Adicionado ID para controle do Alinhador -->
                <div id="servicos" class="tab-content active">
                    <!-- ATUALIZADO: Grid de 4 colunas para Borracharia -->
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                        <!-- Coluna 1: Cadastro -->
                        <div class="lg:col-span-1">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">Registrar Nova Entrada</h2>
                            <form id="service-form" class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                                <div class="mb-4">
                                    <label for="vendedorName" class="block text-sm font-medium text-gray-700">Vendedor</label>
                                    <select id="vendedorName" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500"></select>
                                </div>
                                <div class="mb-4">
                                    <label for="licensePlate" class="block text-sm font-medium text-gray-700">Placa</label>
                                    <input type="text" id="licensePlate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 uppercase">
                                </div>
                                <div class="mb-4">
                                    <label for="carModel" class="block text-sm font-medium text-gray-700">Modelo</label>
                                    <input type="text" id="carModel" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <!-- MUDAN√áA: Servi√ßo agora √© opcional e vira "Avalia√ß√£o" -->
                                <div class="mb-6">
                                    <label for="serviceDescription" class="block text-sm font-medium text-gray-700">Observa√ß√µes Iniciais (Opcional)</label>
                                    <textarea id="serviceDescription" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500" placeholder="Ex: Barulho na suspens√£o. Se vazio, ser√° 'Avalia√ß√£o'."></textarea>
                                </div>

                                <!-- NOVO: Vai trocar Pneus? (Borracharia) -->
                                <div class="mb-6 border p-4 rounded-lg bg-gray-50">
                                    <label class="block text-sm font-bold text-gray-700 mb-2">Vai trocar pneus? (Borracharia)</label>
                                    <div class="flex space-x-4">
                                        <label class="inline-flex items-center">
                                            <input type="radio" name="willTireChange" value="Sim" required class="form-radio h-4 w-4 text-green-600 focus:ring-green-500" checked>
                                            <span class="ml-2 font-medium text-green-700">Sim</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="radio" name="willTireChange" value="Nao" required class="form-radio h-4 w-4 text-red-600 focus:ring-red-500">
                                            <span class="ml-2 font-medium text-red-700">N√£o</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Carro vai alinhar? -->
                                <div class="mb-6 border p-4 rounded-lg bg-gray-50">
                                    <label class="block text-sm font-bold text-gray-700 mb-2">Carro vai alinhar?</label>
                                    <div class="flex space-x-4">
                                        <label class="inline-flex items-center">
                                            <input type="radio" name="willAlign" value="Sim" required class="form-radio h-4 w-4 text-green-600 focus:ring-green-500" checked>
                                            <span class="ml-2 font-medium text-green-700">Sim</span>
                                        </label>
                                        <label class="inline-flex items-center">
                                            <input type="radio" name="willAlign" value="Nao" required class="form-radio h-4 w-4 text-red-600 focus:ring-red-500">
                                            <span class="ml-2 font-medium text-red-700">N√£o</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- MUDAN√áA: Atribui√ß√£o de mec√¢nico agora √© obrigat√≥ria -->
                                <div class="mb-6">
                                    <label for="assignedMechanic" class="block text-sm font-medium text-gray-700">Atribuir Mec√¢nico (Servi√ßo Geral)</label>
                                    <select id="assignedMechanic" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 text-gray-700">
                                        <option value="">-- Escolha um Mec√¢nico --</option>
                                    </select>
                                </div>

                                <button type="submit" class="w-full py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition">
                                    Cadastrar Servi√ßo
                                </button>

                                <p id="assignment-message" class="mt-3 text-center text-sm font-medium text-blue-600"></p>
                                <p id="service-error" class="mt-3 text-center text-sm font-medium text-red-600"></p>
                            </form>
                        </div>

                        <!-- Coluna 2: Fila do Borracheiro (NOVA) -->
                        <div class="lg:col-span-1">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">Fila Borracharia (Pneus)</h2>
                            <div id="tire-shop-queue-display" class="grid grid-cols-1 gap-4">
                                <!-- Card Fixo do Borracheiro -->
                                <div class="mechanic-card bg-gray-50 p-4 rounded-lg shadow-md border border-gray-100">
                                    <h3 class="text-xl font-bold mb-3 text-gray-800 flex justify-between items-center">
                                        Borracheiro
                                        <span id="tire-shop-count" class="text-sm font-semibold py-1 px-3 rounded-full bg-blue-200 text-blue-800">
                                            0 Carros
                                        </span>
                                    </h3>
                                    <ul id="tire-shop-list" class="space-y-2">
                                        <p class="text-sm text-gray-500 italic p-3 border rounded-md">Nenhum carro na fila. ‚úÖ</p>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Coluna 3: Filas dos Mec√¢nicos (Geral) -->
                        <div class="lg:col-span-1">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">Fila Servi√ßos Gerais (<span id="mechanic-list-title"></span>)</h2>
                            <div id="mechanics-queue-display" class="grid grid-cols-1 gap-4"> 
                                <!-- Cards dos Mec√¢nicos (Jos√©, Wendell) ser√£o injetados aqui -->
                            </div>
                        </div>

                        <!-- Coluna 4: Espelho Fila de Alinhamento -->
                        <div class="lg:col-span-1">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">Espelho Fila de Alinhamento</h2>
                            <div id="alignment-mirror" class="bg-gray-50 p-4 rounded-lg shadow-md border border-gray-100 min-h-[300px]">
                                <p class="text-sm text-gray-500 italic p-3 text-center" id="mirror-empty-message">A fila de alinhamento ser√° exibida aqui.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NOVO: Vis√£o exclusiva do Mec√¢nico -->
                <div id="mechanic-view" class="tab-content">
                    <!-- O conte√∫do da vis√£o do mec√¢nico ser√° injetado aqui pelo uiRender.js -->
                    <p class="p-8 text-center text-gray-500">Carregando seus servi√ßos...</p>
                </div>

                <!-- 2. Fila de Alinhamento -->
                <div id="alinhamento" class="tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Coluna de Cadastro (Vendedor) -->
                        <div>
                            <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">Adicionar Manualmente √† Fila de Alinhamento</h2>
                            <form id="alignment-form" class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                                <div class="mb-4">
                                    <label for="aliVendedorName" class="block text-sm font-medium text-gray-700">Vendedor</label>
                                    <select id="aliVendedorName" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500"></select>
                                </div>
                                <div class="mb-4">
                                    <label for="aliLicensePlate" class="block text-sm font-medium text-gray-700">Placa</label>
                                    <input type="text" id="aliLicensePlate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500 uppercase">
                                </div>
                                <div class="mb-6">
                                    <label for="aliCarModel" class="block text-sm font-medium text-gray-700">Modelo</label>
                                    <input type="text" id="aliCarModel" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <button type="submit" class="w-full py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out">
                                    Enviar para Fila de Alinhamento
                                </button>
                                <p id="alignment-error" class="mt-3 text-center text-sm font-medium text-red-600"></p>
                            </form>
                        </div>

                        <!-- Coluna de Visualiza√ß√£o (Alinhador) -->
                        <div>
                            <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">Fila de Espera (Vis√£o do Alinhador)</h2>
                            <div id="alignment-table-container" class="bg-white rounded-lg shadow-sm overflow-x-auto border border-gray-200">
                                <p class="text-gray-500 p-4 text-center" id="alignment-empty-message">A fila de alinhamento est√° vazia. üéâ</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3. Pagamentos e Finaliza√ß√£o (Gerente) -->
                <!-- NOVO: Adicionado ID para controle do Alinhador -->
                <div id="monitor" class="tab-content">
                    <!-- NOVA ESTRUTURA DE SUB-ABAS -->
                    <div class="border-b border-gray-200 mb-6">
                        <nav id="monitor-sub-nav" class="-mb-px flex space-x-6" aria-label="Tabs">
                            <button class="monitor-sub-tab-button active" data-sub-tab="dashboard">
                                Dashboard do Dia
                            </button>
                            <button class="monitor-sub-tab-button" data-sub-tab="reports">
                                Relat√≥rios e M√©tricas
                            </button>
                        </nav>
                    </div>

                    <!-- Conte√∫do da Sub-Aba: Dashboard -->
                    <div id="dashboard" class="monitor-sub-tab-content active">
                        <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">Carros Prontos para Pagamento (Ger√™ncia)</h2>
                        <div id="ready-jobs-container" class="bg-white rounded-lg shadow-sm overflow-x-auto border border-gray-200">
                            <p class="text-gray-500 p-4 text-center" id="ready-empty-message">Nenhum carro pronto para pagamento. Aguardando a conclus√£o dos servi√ßos. ‚è±Ô∏è</p>
                        </div>

                        <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2 mt-8">Estat√≠sticas do Dia</h2>
                        <div id="stats-container" class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-8">
                            <!-- Stats ser√£o injetados aqui -->
                        </div>

                        <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2 mt-8">Monitor de Servi√ßos Pendentes (<span id="mechanic-monitor-title"></span>)</h2>
                        <div id="mechanics-monitor" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Cart√µes de Monitoramento ser√£o injetados aqui -->
                        </div>
                    </div>

                    <!-- Conte√∫do da Sub-Aba: Relat√≥rios -->
                    <div id="reports" class="monitor-sub-tab-content">
                        <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">An√°lise de Desempenho do Dia</h2>
                        <!-- NOVO: Containers para as m√©tricas de performance -->
                        <h3 class="text-xl font-semibold text-gray-700 mb-4">M√©tricas por Equipe</h3>
                        <div id="team-metrics-container" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8">
                            <!-- Cards de m√©tricas por mec√¢nico ser√£o injetados aqui -->
                        </div>

                        <h3 class="text-xl font-semibold text-gray-700 mb-4">M√©tricas por Etapa</h3>
                        <div id="step-metrics-container" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4">
                            <!-- Cards de m√©tricas ser√£o injetados aqui pelo uiRender.js -->
                        </div>

                        <!-- NOVO: Container para os destaques do dia -->
                        <h3 class="text-xl font-semibold text-gray-700 mb-4 mt-8">Destaques do Dia</h3>
                        <div id="highlights-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <!-- Cards de destaques ser√£o injetados aqui -->
                        </div>

                        <!-- NOVO: Container para o hist√≥rico detalhado do dia -->
                        <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2 mt-8">Hist√≥rico de Atendimentos do Dia</h2>
                        <div id="daily-history-container" class="bg-white rounded-lg shadow-sm overflow-x-auto border border-gray-200">
                            <!-- A tabela de hist√≥rico ser√° injetada aqui -->
                        </div>
                        <!-- Outros relat√≥rios (gr√°ficos, tabelas) podem ser adicionados aqui no futuro -->
                    </div>
                </div>

                <!-- 4. Administrativo (Gerente) -->
                <div id="admin" class="tab-content">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Coluna de Cadastro de Usu√°rio -->
                        <div class="lg:col-span-1">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">Gerenciar Usu√°rios</h2>
                            <form id="create-user-form" class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                                <h3 class="text-lg font-medium text-gray-900 mb-4">Criar Novo Usu√°rio</h3>
                                <div class="mb-4">
                                    <label for="newUserName" class="block text-sm font-medium text-gray-700">Nome de Usu√°rio</label>
                                    <input type="text" id="newUserName" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div class="mb-4">
                                    <label for="newUserPassword" class="block text-sm font-medium text-gray-700">Senha</label>
                                    <input type="password" id="newUserPassword" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div class="mb-6">
                                    <label for="newUserRole" class="block text-sm font-medium text-gray-700">Cargo</label>
                                    <select id="newUserRole" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500">
                                        <option value="vendedor">Vendedor</option>
                                        <option value="mecanico">Mec√¢nico</option>
                                        <option value="aligner">Alinhador</option>
                                    </select>
                                </div>
                                <button type="submit" class="w-full py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white bg-green-600 hover:bg-green-700 transition">Criar Usu√°rio</button>
                                <p id="user-feedback" class="mt-3 text-center text-sm font-medium"></p>
                            </form>
                        </div>
                        <!-- Coluna de Listagem de Usu√°rios -->
                        <div class="lg:col-span-2">
                            <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">Usu√°rios Cadastrados</h2>
                            <div id="user-list-container" class="bg-white rounded-lg shadow-sm overflow-x-auto border border-gray-200"></div>
                        </div>
                    </div>
                </div>

                <!-- 5. Remo√ß√£o/Edi√ß√£o (Gerente/Vendedor) -->
                <div id="removal" class="tab-content">
                    <h2 class="text-2xl font-semibold mb-6 text-gray-800 border-b pb-2">Gerenciar Servi√ßos Ativos</h2>
                    <p class="text-sm text-gray-600 mb-6">Use esta tela para marcar um servi√ßo como "perdido" ou para edit√°-lo e retorn√°-lo √† fila.</p>
                    <div id="removal-list-container" class="bg-white rounded-lg shadow-sm overflow-x-auto border border-gray-200">
                        <p class="text-gray-500 p-4 text-center">Nenhum servi√ßo ativo para gerenciar.</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- MODAL DE CONFIRMA√á√ÉO (Substitui o alert/confirm nativo) -->
    <div id="confirmation-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-sm p-6 transform transition-all duration-300 scale-100">
            <h3 id="modal-title" class="text-xl font-bold text-gray-900 mb-4">T√≠tulo</h3>
            <p id="modal-message" class="text-gray-700 mb-6">Mensagem</p>
            <div class="flex justify-end space-x-3">
                <button onclick="hideConfirmationModal()" class="py-2 px-4 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition">
                    Cancelar
                </button>
                <button id="confirm-button" class="py-2 px-4 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 transition">
                    Sim, Confirmar
                </button>
            </div>
        </div>
    </div>
    <!-- FIM MODAL -->

    <!-- NOVO: MODAL PARA DEFINIR SERVI√áO (Apenas Gerente) -->
    <div id="define-service-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 transform transition-all duration-300 scale-100">
            <h3 class="text-xl font-bold text-gray-900 mb-2">Definir Servi√ßo Geral</h3>
            <p id="service-modal-car-info" class="text-gray-600 mb-6 text-sm"></p>
            
            <form id="define-service-form">
                <div class="mb-4">
                    <label for="new-service-description" class="block text-sm font-medium text-gray-700">Descri√ß√£o do Servi√ßo</label>
                    <textarea id="new-service-description" required rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500" placeholder="Ex: Troca de pastilhas de freio e √≥leo"></textarea>
                </div>
                
                <div class="flex justify-end space-x-3">
                    <button type="button" onclick="hideDefineServiceModal()" class="py-2 px-4 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition">
                        Cancelar
                    </button>
                    <button type="submit" class="py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition">
                        Salvar Servi√ßo
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- FIM MODAL SERVI√áO -->

    <!-- NOVO: MODAL DE GERENCIAMENTO (REMOVER/EDITAR) -->
    <div id="management-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-6 transform transition-all">
            <h3 id="management-modal-title" class="text-xl font-bold text-gray-900 mb-4">Gerenciar Servi√ßo</h3>
            <p class="text-gray-700 mb-6">O que voc√™ deseja fazer com este servi√ßo?</p>
            <div class="flex flex-col space-y-3">
                <button id="mark-as-lost-button" onclick="handleMarkAsLost()" class="w-full py-3 px-4 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 transition">
                    Marcar como Perdido
                </button>
                <button id="edit-and-return-button" class="w-full py-3 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition">
                    Editar e Retornar √† Fila
                </button>
                <button onclick="hideManagementModal()" class="w-full mt-4 py-2 px-4 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- NOVO: MODAL DE EDI√á√ÉO DE SERVI√áO -->
    <div id="edit-job-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 transform transition-all">
            <h3 class="text-xl font-bold text-gray-900 mb-2">Editar e Retornar √† Fila</h3>
            <p id="edit-modal-car-info" class="text-gray-600 mb-6 text-sm"></p>
            
            <form id="edit-job-form">
                <!-- Campos de edi√ß√£o ser√£o preenchidos dinamicamente -->
                <div id="edit-fields-container" class="space-y-4">
                    <div class="mb-4">
                        <label for="edit-vendedor" class="block text-sm font-medium text-gray-700">Vendedor</label>
                        <select id="edit-vendedor" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500"></select>
                    </div>
                    <div class="mb-4">
                        <label for="edit-mecanico" class="block text-sm font-medium text-gray-700">Mec√¢nico Respons√°vel</label>
                        <select id="edit-mecanico" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border focus:ring-blue-500 focus:border-blue-500"></select>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-8">
                    <button type="button" onclick="hideEditModal()" class="py-2 px-4 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition">
                        Cancelar
                    </button>
                    <button type="submit" class="py-2 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition">
                        Salvar e Retornar √† Fila
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- FIM MODAL EDI√á√ÉO -->

    <!-- Vinculando o arquivo JavaScript externo (precisa ser 'module' por causa dos imports) -->

    <script type="module" src="assets/js/main.js"></script>
</body>
</html>